import{m as H,v as I,s as P,aU as b,x as z,y as W,ay as d,aV as M,aW as S,r as m,z as N,B as O,C as R,a6 as V,O as U,ac as q,o as D,c as G,b as L,H as Y,n as T,u as i,D as C,_ as j,k as F}from"./index-DsoBdpPh.js";import{C as J,t as K}from"./index--KPkAOGn.js";import{g as Q}from"./el-scrollbar-BT9ENEBV.js";const X=H({zIndex:{type:I([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Z={scroll:({scrollTop:a,fixed:c})=>P(a)&&b(c),[J]:a=>b(a)},B="ElAffix",ee=z({name:B}),te=z({...ee,props:X,emits:Z,setup(a,{expose:c,emit:x}){const e=a,g=W("affix"),l=d(),v=d(),s=d(),{height:n}=M(),{height:r,width:h,top:E,bottom:_,update:p}=S(v,{windowScroll:!1}),u=S(l),o=m(!1),w=m(0),f=m(0),$=N(()=>({height:o.value?`${r.value}px`:"",width:o.value?`${h.value}px`:""})),A=N(()=>{if(!o.value)return{};const t=e.offset?O(e.offset):0;return{height:`${r.value}px`,width:`${h.value}px`,top:e.position==="top"?t:"",bottom:e.position==="bottom"?t:"",transform:f.value?`translateY(${f.value}px)`:"",zIndex:e.zIndex}}),y=()=>{if(s.value)if(w.value=s.value instanceof Window?document.documentElement.scrollTop:s.value.scrollTop||0,e.position==="top")if(e.target){const t=u.bottom.value-e.offset-r.value;o.value=e.offset>E.value&&u.bottom.value>0,f.value=t<0?t:0}else o.value=e.offset>E.value;else if(e.target){const t=n.value-u.top.value-e.offset-r.value;o.value=n.value-e.offset<_.value&&n.value>u.top.value,f.value=t<0?-t:0}else o.value=n.value-e.offset<_.value},k=()=>{p(),x("scroll",{scrollTop:w.value,fixed:o.value})};return R(o,t=>x("change",t)),V(()=>{var t;e.target?(l.value=(t=document.querySelector(e.target))!=null?t:void 0,l.value||K(B,`Target does not exist: ${e.target}`)):l.value=document.documentElement,s.value=Q(v.value,!0),p()}),U(s,"scroll",k),q(y),c({update:y,updateRoot:p}),(t,ae)=>(D(),G("div",{ref_key:"root",ref:v,class:T(i(g).b()),style:C(i($))},[L("div",{class:T({[i(g).m("fixed")]:o.value}),style:C(i(A))},[Y(t.$slots,"default")],6)],6))}});var oe=j(te,[["__file","affix.vue"]]);const re=F(oe);export{re as E};
