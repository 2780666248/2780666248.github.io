import{q as ie,m as ne,t as P,v as se,aU as G,A as R,s as K,x as ee,y as ue,z as k,r as h,B as re,C as J,a6 as ce,o as s,c as b,b as M,u as l,n as g,bq as de,E as d,w as n,F as N,G as w,Z as f,ag as $,d as i,bK as ve,H as Q,D as me,a0 as pe,_ as fe,U as ge,bR as X,k as he,aT as Y,bS as z,az as A,f as be}from"./index-DsoBdpPh.js";import{E as ye}from"./el-card-BZNuscU_.js";import{E as Ve,a as ke,b as _e}from"./el-input-I54vDAvb.js";import{a as we,u as Ce,b as Se,c as Ie,E as Ee}from"./el-button-CZyLWNoe.js";import{u as x,E as He}from"./file-BJWwcfCf.js";import{r as ae,E as Ne}from"./request-DHRn8lua.js";import{s as Te}from"./message-BHkcrDNn.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Be,U as Z,C as W,I as j,d as De,t as Pe}from"./index--KPkAOGn.js";import{u as ze}from"./index-jCYurZL7.js";import"./constants-BRd3JUql.js";import"./castArray-j4beyqTs.js";import"./config-provider-BOKV_tex.js";const Ae=c=>["",...ie].includes(c),Ge=ne({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Ae},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:P},activeActionIcon:{type:P},activeIcon:{type:P},inactiveIcon:{type:P},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:se(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...Be(["ariaLabel"])}),Le={[Z]:c=>G(c)||R(c)||K(c),[W]:c=>G(c)||R(c)||K(c),[j]:c=>G(c)||R(c)||K(c)},Fe=["onClick"],Oe=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],qe=["aria-hidden"],Re=["aria-hidden"],Ke=["aria-hidden"],le="ElSwitch",Me=ee({name:le}),$e=ee({...Me,props:Ge,emits:Le,setup(c,{expose:H,emit:y}){const a=c,{formItem:C}=we(),S=Ce(),u=ue("switch"),{inputId:I}=Se(a,{formItemContext:C}),V=Ie(k(()=>a.loading)),T=h(a.modelValue!==!1),_=h(),L=h(),F=k(()=>[u.b(),u.m(S.value),u.is("disabled",V.value),u.is("checked",t.value)]),U=k(()=>[u.e("label"),u.em("label","left"),u.is("active",!t.value)]),O=k(()=>[u.e("label"),u.em("label","right"),u.is("active",t.value)]),q=k(()=>({width:re(a.width)}));J(()=>a.modelValue,()=>{T.value=!0});const B=k(()=>T.value?a.modelValue:!1),t=k(()=>B.value===a.activeValue);[a.activeValue,a.inactiveValue].includes(B.value)||(y(Z,a.inactiveValue),y(W,a.inactiveValue),y(j,a.inactiveValue)),J(t,e=>{var p;_.value.checked=e,a.validateEvent&&((p=C==null?void 0:C.validate)==null||p.call(C,"change").catch(E=>De()))});const o=()=>{const e=t.value?a.inactiveValue:a.activeValue;y(Z,e),y(W,e),y(j,e),ge(()=>{_.value.checked=t.value})},v=()=>{if(V.value)return;const{beforeChange:e}=a;if(!e){o();return}const p=e();[X(p),G(p)].includes(!0)||Pe(le,"beforeChange must return type `Promise<boolean>` or `boolean`"),X(p)?p.then(D=>{D&&o()}).catch(D=>{}):p&&o()},m=()=>{var e,p;(p=(e=_.value)==null?void 0:e.focus)==null||p.call(e)};return ce(()=>{_.value.checked=t.value}),ze({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},k(()=>!!a.label)),H({focus:m,checked:t}),(e,p)=>(s(),b("div",{class:g(l(F)),onClick:pe(v,["prevent"])},[M("input",{id:l(I),ref_key:"input",ref:_,class:g(l(u).e("input")),type:"checkbox",role:"switch","aria-checked":l(t),"aria-disabled":l(V),"aria-label":e.label||e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:l(V),tabindex:e.tabindex,onChange:o,onKeydown:de(v,["enter"])},null,42,Oe),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(s(),b("span",{key:0,class:g(l(U))},[e.inactiveIcon?(s(),d(l(w),{key:0},{default:n(()=>[(s(),d(N(e.inactiveIcon)))]),_:1})):f("v-if",!0),!e.inactiveIcon&&e.inactiveText?(s(),b("span",{key:1,"aria-hidden":l(t)},$(e.inactiveText),9,qe)):f("v-if",!0)],2)):f("v-if",!0),M("span",{ref_key:"core",ref:L,class:g(l(u).e("core")),style:me(l(q))},[e.inlinePrompt?(s(),b("div",{key:0,class:g(l(u).e("inner"))},[e.activeIcon||e.inactiveIcon?(s(),d(l(w),{key:0,class:g(l(u).is("icon"))},{default:n(()=>[(s(),d(N(l(t)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(s(),b("span",{key:1,class:g(l(u).is("text")),"aria-hidden":!l(t)},$(l(t)?e.activeText:e.inactiveText),11,Re)):f("v-if",!0)],2)):f("v-if",!0),M("div",{class:g(l(u).e("action"))},[e.loading?(s(),d(l(w),{key:0,class:g(l(u).is("loading"))},{default:n(()=>[i(l(ve))]),_:1},8,["class"])):l(t)?Q(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?(s(),d(l(w),{key:0},{default:n(()=>[(s(),d(N(e.activeActionIcon)))]),_:1})):f("v-if",!0)]):l(t)?f("v-if",!0):Q(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?(s(),d(l(w),{key:0},{default:n(()=>[(s(),d(N(e.inactiveActionIcon)))]),_:1})):f("v-if",!0)])],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(s(),b("span",{key:1,class:g(l(O))},[e.activeIcon?(s(),d(l(w),{key:0},{default:n(()=>[(s(),d(N(e.activeIcon)))]),_:1})):f("v-if",!0),!e.activeIcon&&e.activeText?(s(),b("span",{key:1,"aria-hidden":!l(t)},$(e.activeText),9,Ke)):f("v-if",!0)],2)):f("v-if",!0)],10,Fe))}});var Ze=fe($e,[["__file","switch.vue"]]);const We=he(Ze),je=()=>ae.get("/backend/settings/detail"),Je=c=>ae.put("/backend/settings/update",c),Qe=["src"],Xe=["src"],Ye={__name:"BlogSetting",setup(c){const H=h(!1),y=h(null),a=h({name:"",author:"",logo:"",avatar:"",introduction:"",githubHomepage:"",giteeHomepage:"",zhihuHomepage:"",csdnHomepage:""}),C={name:[{required:!0,message:"请输入博客名称",trigger:"blur"}],author:[{required:!0,message:"请输入作者名",trigger:"blur"}],logo:[{required:!0,message:"请上传博客 LOGO",trigger:"blur"}],avatar:[{required:!0,message:"请上传作者头像",trigger:"blur"}],introduction:[{required:!0,message:"请输入介绍语",trigger:"blur"}]},S=h(!1),u=h(!1),I=h(!1),V=h(!1),T=t=>{t||(a.value.githubHomepage="")},_=t=>{t||(a.value.giteeHomepage="")},L=t=>{t||(a.value.zhihuHomepage="")},F=t=>{t||(a.value.csdnHomepage="")},U=async()=>{const t=await je();a.value=t.data,t.data.githubHomepage&&(S.value=!0),t.data.giteeHomepage&&(u.value=!0),t.data.zhihuHomepage&&(I.value=!0),t.data.csdnHomepage&&(V.value=!0)};U();const O=t=>{const o=new FormData;o.append("file",t.raw),x(o).then(v=>{v.success&&(a.value.logo=v.data.url,Te("上传成功"))})},q=t=>{let o=new FormData;o.append("file",t.raw),x(o).then(v=>{v.success&&(a.value.avatar=v.data.url)})},B=()=>{y.value.validate(t=>{if(!t)return console.log("表单验证不通过"),!1;H.value=!0,Je(a.value).then(()=>{Ne.success("保存成功！"),U()}).finally(()=>H.value=!1)})};return(t,o)=>{const v=Ve,m=ke,e=w,p=He,E=We,D=Ee,te=_e,oe=ye;return s(),b("div",null,[i(oe,{shadow:"never"},{default:n(()=>[i(te,{ref_key:"formRef",ref:y,model:a.value,"label-width":"160px",rules:C},{default:n(()=>[i(m,{label:"博客名称",prop:"name"},{default:n(()=>[i(v,{modelValue:a.value.name,"onUpdate:modelValue":o[0]||(o[0]=r=>a.value.name=r),clearable:""},null,8,["modelValue"])]),_:1}),i(m,{label:"作者名",prop:"author"},{default:n(()=>[i(v,{modelValue:a.value.author,"onUpdate:modelValue":o[1]||(o[1]=r=>a.value.author=r),clearable:""},null,8,["modelValue"])]),_:1}),i(m,{label:"博客 LOGO",prop:"logo"},{default:n(()=>[i(p,{class:"avatar-uploader",action:"#","on-change":O,"auto-upload":!1,"show-file-list":!1},{default:n(()=>[a.value.logo?(s(),b("img",{key:0,src:a.value.logo,class:"avatar"},null,8,Qe)):(s(),d(e,{key:1,class:"avatar-uploader-icon"},{default:n(()=>[i(l(Y))]),_:1}))]),_:1})]),_:1}),i(m,{label:"作者头像",prop:"avatar"},{default:n(()=>[i(p,{class:"avatar-uploader",action:"#","on-change":q,"auto-upload":!1,"show-file-list":!1},{default:n(()=>[a.value.avatar?(s(),b("img",{key:0,src:a.value.avatar,class:"avatar"},null,8,Xe)):(s(),d(e,{key:1,class:"avatar-uploader-icon"},{default:n(()=>[i(l(Y))]),_:1}))]),_:1})]),_:1}),i(m,{label:"介绍语",prop:"introduction"},{default:n(()=>[i(v,{modelValue:a.value.introduction,"onUpdate:modelValue":o[2]||(o[2]=r=>a.value.introduction=r),type:"textarea"},null,8,["modelValue"])]),_:1}),i(m,{label:"开启 GihHub 访问"},{default:n(()=>[i(E,{modelValue:S.value,"onUpdate:modelValue":o[3]||(o[3]=r=>S.value=r),"inline-prompt":"","active-icon":l(z),"inactive-icon":l(A),onChange:T},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),S.value?(s(),d(m,{key:0,label:"GitHub 主页访问地址"},{default:n(()=>[i(v,{modelValue:a.value.githubHomepage,"onUpdate:modelValue":o[4]||(o[4]=r=>a.value.githubHomepage=r),clearable:"",placeholder:"请输入 GitHub 主页访问的 URL"},null,8,["modelValue"])]),_:1})):f("",!0),i(m,{label:"开启 Gitee 访问"},{default:n(()=>[i(E,{modelValue:u.value,"onUpdate:modelValue":o[5]||(o[5]=r=>u.value=r),"inline-prompt":"","active-icon":l(z),"inactive-icon":l(A),onChange:_},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),u.value?(s(),d(m,{key:1,label:"Gitee 主页访问地址"},{default:n(()=>[i(v,{modelValue:a.value.giteeHomepage,"onUpdate:modelValue":o[6]||(o[6]=r=>a.value.giteeHomepage=r),clearable:"",placeholder:"请输入 Gitee 主页访问的 URL"},null,8,["modelValue"])]),_:1})):f("",!0),i(m,{label:"开启知乎访问"},{default:n(()=>[i(E,{modelValue:I.value,"onUpdate:modelValue":o[7]||(o[7]=r=>I.value=r),"inline-prompt":"","active-icon":l(z),"inactive-icon":l(A),onChange:L},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),I.value?(s(),d(m,{key:2,label:"知乎主页访问地址"},{default:n(()=>[i(v,{modelValue:a.value.zhihuHomepage,"onUpdate:modelValue":o[8]||(o[8]=r=>a.value.zhihuHomepage=r),clearable:"",placeholder:"请输入知乎主页访问的 URL"},null,8,["modelValue"])]),_:1})):f("",!0),i(m,{label:"开启 CSDN 访问"},{default:n(()=>[i(E,{modelValue:V.value,"onUpdate:modelValue":o[9]||(o[9]=r=>V.value=r),"inline-prompt":"","active-icon":l(z),"inactive-icon":l(A),onChange:F},null,8,["modelValue","active-icon","inactive-icon"])]),_:1}),V.value?(s(),d(m,{key:3,label:"CSDN 主页访问地址"},{default:n(()=>[i(v,{modelValue:a.value.csdnHomepage,"onUpdate:modelValue":o[10]||(o[10]=r=>a.value.csdnHomepage=r),clearable:"",placeholder:"请输入 CSDN 主页访问的 URL"},null,8,["modelValue"])]),_:1})):f("",!0),i(m,null,{default:n(()=>[i(D,{type:"primary",loading:H.value,onClick:B},{default:n(()=>[be("保存")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},va=Ue(Ye,[["__scopeId","data-v-edda2ae5"]]);export{va as default};
