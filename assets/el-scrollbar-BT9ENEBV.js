import{as as B,bb as se,bn as le,m as $,_ as j,x as L,i as Z,y as Q,r as y,z as C,X as ae,O,N as I,o as N,E as W,w as ee,a8 as re,b as A,n as P,u as w,D,a9 as ne,T as ie,c as te,d as K,a1 as ce,v as ue,s as k,B as V,C as X,ad as fe,U as Y,j as de,a as ve,a6 as me,bH as pe,H as he,F as ye,Z as be,ae as we,k as ge,aJ as Se}from"./index-DsoBdpPh.js";import{t as ze,u as Ee}from"./index--KPkAOGn.js";const _e=(t,o)=>{if(!B)return!1;const e={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(o)],s=se(t,e);return["scroll","auto","overlay"].some(a=>s.includes(a))},je=(t,o)=>{if(!B)return;let e=t;for(;e;){if([window,document,document.documentElement].includes(e))return window;if(_e(e,o))return e;e=e.parentNode}return e};let x;const Fe=t=>{var o;if(!B)return 0;if(x!==void 0)return x;const e=document.createElement("div");e.className=`${t}-scrollbar__wrap`,e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const s=e.offsetWidth;e.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",e.appendChild(a);const i=a.offsetWidth;return(o=e.parentNode)==null||o.removeChild(e),x=s-i,x};function Ue(t,o){if(!B)return;if(!o){t.scrollTop=0;return}const e=[];let s=o.offsetParent;for(;s!==null&&t!==s&&t.contains(s);)e.push(s),s=s.offsetParent;const a=o.offsetTop+e.reduce((n,m)=>n+m.offsetTop,0),i=a+o.offsetHeight,u=t.scrollTop,f=u+t.clientHeight;a<u?t.scrollTop=a:i>f&&(t.scrollTop=i-t.clientHeight)}const Ie=(...t)=>o=>{t.forEach(e=>{le(e)?e(o):e.value=o})},T=4,He={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Te=({move:t,size:o,bar:e})=>({[e.size]:o,transform:`translate${e.axis}(${t}%)`}),F=Symbol("scrollbarContextKey"),Ce=$({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Be="Thumb",Re=L({__name:"thumb",props:Ce,setup(t){const o=t,e=Z(F),s=Q("scrollbar");e||ze(Be,"can not inject scrollbar context");const a=y(),i=y(),u=y({}),f=y(!1);let n=!1,m=!1,b=B?document.onselectstart:null;const r=C(()=>He[o.vertical?"vertical":"horizontal"]),c=C(()=>Te({size:o.size,move:o.move,bar:r.value})),p=C(()=>a.value[r.value.offset]**2/e.wrapElement[r.value.scrollSize]/o.ratio/i.value[r.value.offset]),h=v=>{var S;if(v.stopPropagation(),v.ctrlKey||[1,2].includes(v.button))return;(S=window.getSelection())==null||S.removeAllRanges(),_(v);const H=v.currentTarget;H&&(u.value[r.value.axis]=H[r.value.offset]-(v[r.value.client]-H.getBoundingClientRect()[r.value.direction]))},E=v=>{if(!i.value||!a.value||!e.wrapElement)return;const S=Math.abs(v.target.getBoundingClientRect()[r.value.direction]-v[r.value.client]),H=i.value[r.value.offset]/2,M=(S-H)*100*p.value/a.value[r.value.offset];e.wrapElement[r.value.scroll]=M*e.wrapElement[r.value.scrollSize]/100},_=v=>{v.stopImmediatePropagation(),n=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",d),b=document.onselectstart,document.onselectstart=()=>!1},g=v=>{if(!a.value||!i.value||n===!1)return;const S=u.value[r.value.axis];if(!S)return;const H=(a.value.getBoundingClientRect()[r.value.direction]-v[r.value.client])*-1,M=i.value[r.value.offset]-S,oe=(H-M)*100*p.value/a.value[r.value.offset];e.wrapElement[r.value.scroll]=oe*e.wrapElement[r.value.scrollSize]/100},d=()=>{n=!1,u.value[r.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",d),U(),m&&(f.value=!1)},l=()=>{m=!1,f.value=!!o.size},R=()=>{m=!0,f.value=n};ae(()=>{U(),document.removeEventListener("mouseup",d)});const U=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return O(I(e,"scrollbarElement"),"mousemove",l),O(I(e,"scrollbarElement"),"mouseleave",R),(v,S)=>(N(),W(ie,{name:w(s).b("fade"),persisted:""},{default:ee(()=>[re(A("div",{ref_key:"instance",ref:a,class:P([w(s).e("bar"),w(s).is(w(r).key)]),onMousedown:E},[A("div",{ref_key:"thumb",ref:i,class:P(w(s).e("thumb")),style:D(w(c)),onMousedown:h},null,38)],34),[[ne,v.always||f.value]])]),_:1},8,["name"]))}});var q=j(Re,[["__file","thumb.vue"]]);const ke=$({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ne=L({__name:"bar",props:ke,setup(t,{expose:o}){const e=t,s=Z(F),a=y(0),i=y(0),u=y(""),f=y(""),n=y(1),m=y(1);return o({handleScroll:c=>{if(c){const p=c.offsetHeight-T,h=c.offsetWidth-T;i.value=c.scrollTop*100/p*n.value,a.value=c.scrollLeft*100/h*m.value}},update:()=>{const c=s==null?void 0:s.wrapElement;if(!c)return;const p=c.offsetHeight-T,h=c.offsetWidth-T,E=p**2/c.scrollHeight,_=h**2/c.scrollWidth,g=Math.max(E,e.minSize),d=Math.max(_,e.minSize);n.value=E/(p-E)/(g/(p-g)),m.value=_/(h-_)/(d/(h-d)),f.value=g+T<p?`${g}px`:"",u.value=d+T<h?`${d}px`:""}}),(c,p)=>(N(),te(ce,null,[K(q,{move:a.value,ratio:m.value,size:u.value,always:c.always},null,8,["move","ratio","size","always"]),K(q,{move:i.value,ratio:n.value,size:f.value,vertical:"",always:c.always},null,8,["move","ratio","size","always"])],64))}});var Pe=j(Ne,[["__file","bar.vue"]]);const xe=$({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ue([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...Ee(["ariaLabel","ariaOrientation"])}),Le={scroll:({scrollTop:t,scrollLeft:o})=>[t,o].every(k)},Me="ElScrollbar",Oe=L({name:Me}),We=L({...Oe,props:xe,emits:Le,setup(t,{expose:o,emit:e}){const s=t,a=Q("scrollbar");let i,u;const f=y(),n=y(),m=y(),b=y(),r=C(()=>{const l={};return s.height&&(l.height=V(s.height)),s.maxHeight&&(l.maxHeight=V(s.maxHeight)),[s.wrapStyle,l]}),c=C(()=>[s.wrapClass,a.e("wrap"),{[a.em("wrap","hidden-default")]:!s.native}]),p=C(()=>[a.e("view"),s.viewClass]),h=()=>{var l;n.value&&((l=b.value)==null||l.handleScroll(n.value),e("scroll",{scrollTop:n.value.scrollTop,scrollLeft:n.value.scrollLeft}))};function E(l,R){we(l)?n.value.scrollTo(l):k(l)&&k(R)&&n.value.scrollTo(l,R)}const _=l=>{k(l)&&(n.value.scrollTop=l)},g=l=>{k(l)&&(n.value.scrollLeft=l)},d=()=>{var l;(l=b.value)==null||l.update()};return X(()=>s.noresize,l=>{l?(i==null||i(),u==null||u()):({stop:i}=fe(m,d),u=O("resize",d))},{immediate:!0}),X(()=>[s.maxHeight,s.height],()=>{s.native||Y(()=>{var l;d(),n.value&&((l=b.value)==null||l.handleScroll(n.value))})}),de(F,ve({scrollbarElement:f,wrapElement:n})),me(()=>{s.native||Y(()=>{d()})}),pe(()=>d()),o({wrapRef:n,update:d,scrollTo:E,setScrollTop:_,setScrollLeft:g,handleScroll:h}),(l,R)=>(N(),te("div",{ref_key:"scrollbarRef",ref:f,class:P(w(a).b())},[A("div",{ref_key:"wrapRef",ref:n,class:P(w(c)),style:D(w(r)),onScroll:h},[(N(),W(ye(l.tag),{id:l.id,ref_key:"resizeRef",ref:m,class:P(w(p)),style:D(l.viewStyle),role:l.role,"aria-label":l.ariaLabel,"aria-orientation":l.ariaOrientation},{default:ee(()=>[he(l.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),l.native?be("v-if",!0):(N(),W(Pe,{key:0,ref_key:"barRef",ref:b,always:l.always,"min-size":l.minSize},null,8,["always","min-size"]))],2))}});var Ae=j(We,[["__file","scrollbar.vue"]]);const Ke=ge(Ae),z=new Map;let G;B&&(document.addEventListener("mousedown",t=>G=t),document.addEventListener("mouseup",t=>{for(const o of z.values())for(const{documentHandler:e}of o)e(t,G)}));function J(t,o){let e=[];return Array.isArray(o.arg)?e=o.arg:Se(o.arg)&&e.push(o.arg),function(s,a){const i=o.instance.popperRef,u=s.target,f=a==null?void 0:a.target,n=!o||!o.instance,m=!u||!f,b=t.contains(u)||t.contains(f),r=t===u,c=e.length&&e.some(h=>h==null?void 0:h.contains(u))||e.length&&e.includes(f),p=i&&(i.contains(u)||i.contains(f));n||m||b||r||c||p||o.value(s,a)}}const Ve={beforeMount(t,o){z.has(t)||z.set(t,[]),z.get(t).push({documentHandler:J(t,o),bindingFn:o.value})},updated(t,o){z.has(t)||z.set(t,[]);const e=z.get(t),s=e.findIndex(i=>i.bindingFn===o.oldValue),a={documentHandler:J(t,o),bindingFn:o.value};s>=0?e.splice(s,1,a):e.push(a)},unmounted(t){z.delete(t)}};export{Ve as C,Ke as E,Fe as a,Ie as c,je as g,Ue as s};
